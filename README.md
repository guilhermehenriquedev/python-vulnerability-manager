<h1 align="center">Back Vulnerability Manager</h1>

<p align="center">üöÄ API para importar arquivo CSV, gerar relat√≥rio e dashboards para aplica√ß√µes Web </p>

###### STATUS: Concluido ‚úÖ

Documenta√ß√£o:
-------------

# Requerimentos e configura√ß√£o
Para utilizar os recursos da aplica√ß√£o √© nescess√°rio ter instalado as tecnologias [Python][], [Django][] e suas dependencias, com base nisso, siga os passos abaixo para configura√ß√£o e instala√ß√£o dos recursos

[Python]: https://docs.python.org/3/
[Django]: https://docs.djangoproject.com/en/4.0/

* 1¬∫ Para fluidez e garantia que o projeto ir√° funcionar perfeitamente a vers√£o do Python 3.10.0 ser√° necess√°ria, para isso siga os passos abaixo para instalar o python por meio do pyenv:

# Instalando python com pyenv
Execute o seguinte comando no seu terminal:
```bash
curl https://pyenv.run | bash
```
* curl √© uma ferramenta em linha de comando para transfer√™ncia de dados com sintaxe URL.
* | , esse s√≠mbolo √© conhecido como pipe. Ele pega a sa√≠da de um comando dado √† esquerda e o coloca como entrada para o comando da direita.
* bash √© o shell.

Agora vamos abrir o arquivo .bashrc

```bash
vim .bashrc
```
ou

```bash
vim ~/.bashrc
```
e acrescentar ao final do arquivo essas linhas:
```bash
export PATH="$HOME/.pyenv/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv virtualenv-init -)"
```
<b> Aten√ß√£o para n√£o esquecer de salvar o arquivo antes de sair do editor.</b>

Caso na sua m√°quina n√£o tenha o vim instalado, use o editor de sua preferencia ou execute:

```bash
sudo apt-get update
sudo apt-get install vim
```

A partir de agora podemos escolher qual vers√£o do Python instalar com a ajuda do Pyenv. Para isso basta digitar no terminal:

```bash
pyenv install -list
```
Como o projeto back-vulnerability-manager foi desenvolvido com o python 3.10.0, vamos instalar essa vers√£o usando o comando:

```bash
pyenv install 3.10.0
```

Ap√≥s a instala√ß√£o, digite o comando abaixo para que a vers√£o 3.10 fique disponivel

```bash
pyenv global 3.10.0
```

* 2¬∫ Agora voc√™ ir√° precisar do instalador de pacotes [Pip][], para isso digite o comando:

[Pip]: https://docs.python.org/3/

```bash
sudo apt install python3-pip
```

Seguindo os passos acima voc√™ j√° tem o essencial para instala√ß√£o de dependencias e configura√ß√£o de ambiente da aplica√ß√£o

# Instalando dependencias 

Antes de instalar as dependencias do projeto, precisamos de um ambiente virtual. Para isso digite no seu terminal o seguinte comando:

```bash
python -m venv venv
```
Conforme a imagem abaixo, ir√° ser criado automaticamento um arquivo chamado venv

![Captura de tela de 2022-05-07 04-42-43](https://user-images.githubusercontent.com/50114323/167244393-2cb3b86b-75c7-488a-93e9-aac5e6749f07.png)

Crie um arquivo .env, pode copiar os dados que est√£o no .env.example

Ap√≥s isso, ative seu ambiente virtual com o comando:

```bash
source venv/bin/activate
```
Agora iremos instalar as dependecias necess√°rias para que o projeto possa funcionar corretamente, com o comando:

```bash
pip install -r requirements.txt
```
Execute o comando abaixo para aplicar migra√ß√µes e manipula√ß√µes do esquema de banco de dados do Django:

```bash
python manage.py makemigrations
python manage.py migrate
```

Agora sim!!! Podemos executar nosso servidor local e come√ßar a consumir nossas API's ü§©. Digite o comando:

```bash
python manage.py runserver
```

Conforme a imagem abaixo, ser√° gerado o ip na qual a API ir√° executar na web, no caso http://127.0.0.1:8000

![Captura de tela de 2022-05-07 05-06-36](https://user-images.githubusercontent.com/50114323/167245364-c6d9f237-dedb-4f0c-9a19-bf8a13c0e3ed.png)

Copie o ip gerado e cole na url do navegador da seguinte forma http://127.0.0.1:8000/api

Ser√° exibido na sua tela a seguinte tela:

![Captura de tela de 2022-05-07 05-11-25](https://user-images.githubusercontent.com/50114323/167245491-b6d28447-d28a-4a31-846f-6fce51a84e0f.png)

# Urls
Abaixo voc√™ ver√° as urls dispon√≠veis na aplica√ß√£o e suas finalidades

http://127.0.0.1:8000/api/vulnerability_report/ = Busca todos os registros do banco de dados
http://127.0.0.1:8000/api/metricas/severity_sum/ = Soma os n√≠veis de gravidade 
http://127.0.0.1:8000/api/metricas/status_sum/ = Soma os Status de cada demanda (CORRIGIDA - N√ÉO CORRIGIDA)
http://127.0.0.1:8000/api/metricas/host_sum/ = Gera uma m√©trica para cada hostname e soma os niveis de gravidade distintos

# Testes unit√°rios
Para executar os testes implemetados, com seu ambiente virtual ativado, na raiz do projeto cole o seguinte comando:

```bash
python manage.py test dash.core.tests.tests_views.TestViews
```

# Sistema de logs
A cada requisi√ß√£o executada nas API's s√£o gerados logs por meio da biblioteca logging. Os mesmo ficar√£o armazenados em um arquivo chamado dash-application.log, localizado na pasta logs. 
Conforme imagem abaixo, ter√° a exibi√ß√£o de como os logs s√£o armazenados

![Captura de tela de 2022-05-07 05-36-06](https://user-images.githubusercontent.com/50114323/167246411-a419c6f2-9ad9-4213-95e9-2d019b26a584.png)

# Autor
Guilherme Henrique 
<br>
LinkedIn: https://www.linkedin.com/in/guiilhermedev/
